{% extends 'base.html' %}
{% load static %}

{% block title %}Magasins à proximité{% endblock %}

{% block content %}
<section class="hero">
  <h1>Magasins à proximité</h1>
  <p>Trouvez rapidement les magasins autour de vous, triés par distance et durée estimée.</p>
  <div class="controls">
    <label>
      Latitude
      <input id="lat-input" type="number" step="0.000001" placeholder="ex: -0.3901" />
    </label>
    <label>
      Longitude
      <input id="lng-input" type="number" step="0.000001" placeholder="ex: 9.4544" />
    </label>
    <label>
      Rayon (km)
      <input id="radius-km" type="number" min="1" max="50" step="1" value="10" />
    </label>
    <label>
      Mode
      <select id="mode">
        <option value="driving" selected>En voiture</option>
        <option value="walking">À pied</option>
        <option value="bicycling">Vélo</option>
        <option value="transit">Transport</option>
      </select>
    </label>
    <button id="refresh-btn" class="btn">Rechercher</button>
  </div>
</section>

<section class="proximity">
  <div id="map" style="width:100%;height:360px;border-radius:8px;background:#f2f2f2;margin-bottom:12px;"></div>
  <div id="status" class="status" style="margin:12px 0;color:#666;">Obtention de votre position…</div>
  <div id="results" class="cards-grid"></div>
</section>
{% endblock %}

{% block extra_scripts %}
  {% if google_maps_api_key %}
    <script async defer src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&libraries=places&language=fr&region=GA"></script>
  {% endif %}
  <script defer src="{% static 'js/geo.js' %}"></script>
{% endblock %}
